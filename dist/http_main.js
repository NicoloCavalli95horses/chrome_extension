function a({type:o,data:e}){window.postMessage({type:o,data:e},"*")}function d({hasSensitiveKeysFn:o}){let e=XMLHttpRequest.prototype,n=e.open,r=e.send,s=e.setRequestHeader;return e.open=function(t,p){return this._method=t,this._url=p,this._requestHeaders={},this._startTime=new Date().toISOString(),n.apply(this,arguments)},e.setRequestHeader=function(t,p){return this._requestHeaders[t]=p,s.apply(this,arguments)},e.send=function(t){return this.addEventListener("load",()=>{let p=new Date().toISOString(),i={uri:decodeURIComponent(this._url),verb:this._method,time:this._startTime,headers:this._requestHeaders};if(t)if(typeof t=="string")try{i.body=JSON.parse(t)}catch{i.body=t}else(typeof t=="object"||Array.isArray(t)||typeof t=="number"||typeof t=="boolean")&&(i.body=t);let c={status:this.status,time:p,headers:this.getAllResponseHeaders()};if(this.responseText)try{c.body=JSON.parse(this.responseText),c._SENSITIVE=o(c.body)}catch{c.body=this.responseText}a({type:"SERVICE_WORKER",data:{request:i,response:c||{}}})}),r.apply(this,arguments)},function(){e.open=n,e.send=r,e.setRequestHeader=s}}function h(){let o=window.fetch;window.fetch=function(...e){return o.apply(this,e).then(n=>{let r=n.clone(),s={request:e[0]||{},response:{}};return r.json().then(u=>(s.response={...u,is_json:!0},a({type:"SERVICE_WORKER",data:s}),n)).catch(()=>r.text().then(u=>(s.response=u,a({type:"SERVICE_WORKER",data:s}),n)))}).catch(n=>{throw n})}}var f=["locked","unlocked","premium","free","pro","subscribed"];function l(o){return R(o,f)}function y(o=[]){let e=r=>r.charAt(0).toUpperCase()+r.slice(1),n=[];return o.forEach(r=>{let s=e(r.toString());n.push(r,`is${s}`,`is_${r}`,`_${r}`)}),n}function m(o,e){if(o.charAt(0)=="_"){let n=new RegExp("^(.+)"+o+"$");return!!e.match(n)}return!1}function R(o,e=[]){function n(s,u){if(s&&typeof s=="object"){for(let t in s)if(Object.prototype.hasOwnProperty.call(s,t)){if(u.some(c=>t===c||m(c,t)))return!0;let i=s[t];if(typeof i=="object"&&i!==null&&n(i,u))return!0}}return!1}let r=y(e);return n(o,r)}x();function x(){console.log("[EXT] XHL/fetch intercepted in:",window.location.href),window.__injected=!0,d({hasSensitiveKeysFn:l}),h()}
